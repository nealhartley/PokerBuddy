<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
      
        <div class = "practice">
            
            <button type = "button"> Let's Go</button>
           
            
            
        </div>
        
        
        
    <script>
    //global variables which will be sued for determining advice given to player.
    
    //gamestate. states: "DRAW", "PREFLOP", "FLOP", "TURN", "RIVER"
    var gameState = "DRAW";
    
    //handtype.  Types are= "HIGH", "LOW", "CONNECTED", "UNCONNECTED", "SUITED"
    var global_HandType;
    
    //card 1 details
    var global_Card1Num;
    var global_Card1Suit;
    
    //card 2 details
    var global_Card2Num;
    var global_Card2Suit;
    
    
    //click button does function that creates a hand for the user to practice with
        
        
        $("button").click(function(){
            
            console.log("gameState = " + gameState);
            
            if(gameState === "DRAW"){
            
                console.log("button was clicked");
                var min = 1; 
                var max = 5;
                randomNum(min, max);

                var handType = randomNum(min, max);//selecting the type of hand the user is going to get
                //we are using this format as oppsed to populating an array of cards and dealing them randomly as majority of the time
                //the user would get junk hands making practice less meaningful. This way the user will practice every hand type evenly.
                console.log("rolled a " + handType + " in click function");

                if(handType === HAND.HIGHPAIR.value){
                    console.log("we got a high pair; rolled value was: " + handType);
                    global_HandType = "HIGH";
                    giveMePair("HIGH");

                }

                else if(handType === HAND.LOWPAIR.value){
                    console.log("we got a low pair; rolled value was: " + handType);
                    global_HandType = "LOW";
                   giveMePair("LOW");
                }

                else if(handType === HAND.CONNECTORS.value){
                    console.log("we got a connectors; rolled value was: " + handType);
                    global_HandType = "CONNECTORS";
                    giveMeConnectors();
                }

                else if(handType === HAND.UNCONNECTED.value){
                    console.log("we got a unconnected; rolled value was: " + handType);
                    global_HandType = "UNCONNECTED";
                    giveMeUnconnected();
                }

               else if(handType === HAND.SUITED.value){
                   console.log("we got a suited; rolled value was: " + handType);
                   global_HandType = "SUITED";
                    giveMeSuited();
                }
            }
            
            else if(gameState === "PREFLOP"){
                console.log("deal Flop!");
                dealFlop();
                
            }
            
        });
        
        //#############Deal out cards#################
        
    
        //deal flop
        function dealFlop(){
            
            //card 1 deets
            var card1Num = randomNum(1,13);
            var card1Suit = randomNum(1,4);
            //card 2 deets
            var card2Num = randomNum(1,13);
            var card2Suit = randomNum(1,4);
            //card3 deets
            var card3Num = randomNum(1,13);
            var card3Suit = randomNum(1,4);
            
            console.log("about to draw flop");
            
            
            drawFlop(card1Num, card1Suit, card2Num, card2Suit, card3Num , card3Suit);
            
            
            
            
        }
        
        
        //########hand functions##########
        
        //suited
        function giveMeSuited(){
            //one suit num since theyre going to be the same
            var suitNum = randomNum(1,4);
            
            //numbers representing the value of the card
            var card1Num = randomNum(10,13);
            var card2Num = differentCard(card1Num);
             
            setGlobalVars(card1Num, card2Num, suitNum, suitNum);
            
            //now print the cards
            drawHand(card1Num,card2Num,suitNum,suitNum);
            
        }
        
        //unconnected cards
        function giveMeUnconnected(){
            //numbers representing the value of the card
            var card1Num = randomNum(10,13);
            var card2Num;
            
            //second card must be atleast 5 away from the top card
            //minus 2 from cardNum because we want neither 0 nor 1 as an option. A would make it a connected set
            card2Num = card1Num - randomNum(5,card1Num-2);
            
            console.log( "card 1 :" + card1Num + " , card 2: " + card2Num);
            //time to get some suits
            var suit1Num = randomNum(1,4);
            var suit2Num = randomNum(1,4);
            
            setGlobalVars(card1Num, card2Num, suit1Num, suit2Num);
            
            //now print the cards
            drawHand(card1Num,card2Num,suit1Num,suit2Num);
        }
        
        
        //connectors             ! NTS do we want connectors that are spaced further than 1 apart?
        function giveMeConnectors(){
            
            //numbers representing the value of the card
            var card1Num = randomNum(1,13);
            var card2Num;
            
            //clauses ensuring we get a card within 1 unit for our second card
            if(card1Num === 1){ card2Num = card1Num + 1; }
            else if (card1Num === 13){card2Num = card1Num - 1; }
            else{
                var upOrDown = randomNum(1,2);
                console.log(upOrDown);
                //if its not going to be the same we use it
                if(upOrDown === 0 ){card2Num = card1Num + 1;}
                //otherwise we jsut default to going up one, pretty lame, I know.
                else{card2Num = card1Num - 1;}
            }
            
            console.log( "card 1 :" + card1Num + " , card 2: " + card2Num);
            //time to get some suits
            var suit1Num = randomNum(1,4);
            var suit2Num = randomNum(1,4);
            
            setGlobalVars(card1Num, card2Num, suit1Num, suit2Num);
            
            //now print the cards
            drawHand(card1Num, card2Num, suit1Num, suit2Num);                        
        }
        
        
        //function returns a High Pair or Low Pair.
        function giveMePair(type){
            
            var minCardNo; 
            var maxCardNo;
        
            if(type === "HIGH"){
            //the spread for possible card number in high pair
            //Jack, Queen, King, Ace = 4 spread
            minCardNo = 11; 
            maxCardNo = 14;
            }
            
            if(type === "LOW"){
              //the spread for possible card number in low pair
            //Jack, Queen, King, Ace = 4 spread
            minCardNo = 2; 
            maxCardNo = 10;
            }  
            
            //spread for suits
            var suitMin = 1; 
            var suitMax = 4;
            
            //use math random to give us a card number
            var handCardNumber = randomNum(minCardNo, maxCardNo);
                
            //ace conversion
            if(handCardNumber === 14){handCardNumber = 1;}
            
            //use math random to give us our suit type
            var handSuit = randomNum(suitMin, suitMax);
            
            //get a different suit so as to make sure cards are not suited
            var secondSuit = differentSuit(handSuit);
            
            //now we need to use the numbers we've generated to return a string that can be used 
            //with jquery in order to produce the images of the card for the user to look at.            
            var cards = cardNumToString(handCardNumber);//string for cards i.e ACE, etc
            
           
            
            setGlobalVars(handCardNumber, handCardNumber, handSuit, secondSuit);
                        
           // console.log( '<image src = "Images/CardsSVG/' + cards + '_of_' + suitOne + '.svg"/>');
           // console.log( "<image src = Images/CardsSVG/" + cards + "_of_" + suitTwo + ".svg/>");
            
            //draw hand
            drawHand(handCardNumber, handCardNumber, handSuit, secondSuit);
            
            
           
           
        }
        
               
        
        
        //gives a random integer between given bounds.
        //both min and max are inclusive.
        function randomNum(low, high){
            //given the random nature of cards random generation comes in to play a lot so this just cuts down on code reuse
            
            return Math.floor(Math.random() * (high - low + 1) + low);
            
        
        
        }
        
        //give teh numerical value of asuit will give you a different one
        function differentSuit(suit){
            
            var suitMin = 1; 
            var suitMax = 4;                        

            //use math random to give us our suit type
            var handSuit = randomNum(suitMin, suitMax);

            //if suit gotten from randomisation is the same as given suit
            //recurse and return the result from running differentSuit() again.
            if(handSuit === suit){
                //recursive call.
                console.log("       recursing in differentSuit()");
                return differentSuit(suit);
            }

            //if it makes it past if clause then we have an alternate suit
            //return this suit.
            console.log("   inside differentSuit() given suit was " + suit);
            console.log("   returning different suit now " + suitNumToString(handSuit));
            return handSuit;        
        }
        //given the numerical value of a card will return you a different card.
        function differentCard(card){
            
            var cardMin = 1; 
            var cardMax = 13;                        

            //use math random to give us our card
            var newCard = randomNum(cardMin, cardMax);

            //if card gotten from randomisation is the same as given suit
            //recurse and return the result from running differentSuit() again.
            if(newCard === card){
                //recursive call.
                console.log("       recursing in differentCard()");
                return differentCard(card);
            }

            //if it makes it past if clause then we have an alternate suit
            //return this suit.
            console.log("   inside differentCard() given card was " + card);
            console.log("   returning different card now " + cardNumToString(newCard));
            return newCard;        
            
        }
        
        //Methods for turning card and suit numbers into strings below
        
        //takes the random generated number for a suit from another function and returns
        //the associated suit.
        function suitNumToString(suit){
            //some simple stuff below comparing number given to our SUIT enumerators
            if(suit === SUIT.DIAMONDS.value){return "diamonds";}
            else if(suit === SUIT.HEARTS.value){return "hearts";}
            else if(suit === SUIT.SPADES.value){return "spades";}
            else if(suit === SUIT.CLUBS.value){return "clubs";}
            else{
                console.log("   !you've given suitNumToString() some bad input yo: " + suit + ", returning hearts by default");
                return "hearts";
            }
            
        }
        
        //takes the random generated number for a card from another function and returns
        //the associated card.
        function cardNumToString(card){
            
            //########################add wrong input check here. <-----------make incorrect input exception class
            
            
            //some simple stuff below comparing number given to our CARDS enumerators
            //only need to do this for named cards i.e Jack,Queen,King,Ace otherwise number is fine for string
            
            
            if(card === CARDS.ACE.value){return "ace";}
            if(card === CARDS.JACK.value){return "jack";}
            if(card === CARDS.QUEEN.value){return "queen";}
            if(card === CARDS.KING.value){return "king";}
            
            //if it makes it past one of these then it must be a plain number card which we can return as is.
            return card;
         
            }
            
        //sets the global variables that keep the game state for cards.
        function setGlobalVars(card1Num, card2Num, card1Suit, card2Suit){
            
            global_Card1Num = card1Num;
            global_Card2Num = card2Num;
            
            global_Card1Suit = card1Suit;
            global_Card2Suit = card2Suit;
        }
        
        
        //draws the drawn cards to the div that originally had the draw cards button.
        function drawHand(card1Num, card2Num, suit1Num, suit2Num){
            
                        
            $(".practice").append( '<image src = "Images/CardsSVG/' + cardNumToString(card1Num) + '_of_' + suitNumToString(suit1Num) + '.svg"/>');//append card 1 to div
            
            $(".practice").append("<image src = Images/CardsSVG/" + cardNumToString(card2Num) + "_of_" + suitNumToString(suit2Num) + ".svg/>");//append card 2 to div
            
                     
            //change gamestate
            gameState = "PREFLOP";
            
        }
        
        //draws the flop cards to the div.
        function drawFlop(num1,suit1,num2,suit2,num3,suit3){
            
            console.log("drawing flop");
            
            $(".practice").append( '<image src = "Images/CardsSVG/' + cardNumToString(num1) + '_of_' + suitNumToString(suit1) + '.svg"/>');//append card 1 to div
            
            $(".practice").append("<image src = Images/CardsSVG/" + cardNumToString(num2) + "_of_" + suitNumToString(suit2) + ".svg/>");//append card 2 to div
            
            $(".practice").append("<image src = Images/CardsSVG/" + cardNumToString(num3) + "_of_" + suitNumToString(suit3) + ".svg/>");//append card 3 to div
            
            //change gameState
            gameState = "FLOP";
        }
            
            
        
        
        
        
        //DEFINED ENUMERATORS BELOW FOR ALL THE FUNCTIONS ABOVE
        
        //enum for hand types
        var HAND = {
            HIGHPAIR : {value:1, name: "high pair", code: "HP"},
            LOWPAIR : {value:2, name: "low pair", code: "LP"},
            CONNECTORS : {value:3, name: "connectors", code: "CON"},
            UNCONNECTED : {value:4, name: "unconnected", code: "UNCON"},
            SUITED : {value:5, name: "suited", code: "SUITD"}
        }
        //enums for suits
        var SUIT = {
            HEARTS : {value:1, name: "hearts", code: "HEARTS"},
            DIAMONDS : {value:2, name: "diamonds", code: "DIAMONDS"},
            CLUBS : {value:3, name: "clubs", code: "CON"},
            SPADES : {value:4, name: "spades", code: "UNCON"},
           
        }
        //enums for cards
        var CARDS = {
            ACE : {value:1, name: "ace", code: "ACE"},
            TWO : {value:2, name: "two", code: "TWO"},
            THREE : {value:3, name: "three", code: "THREE"},
            FOUR : {value:4, name: "four", code: "FOUR"},
            FIVE : {value:5, name: "five", code: "FIVE"},
            SIX : {value:6, name: "six", code: "SIX"},
            SEVEN : {value:7, name: "seven", code: "SEVEN"},
            EIGHT : {value:8, name: "eight", code: "EIGHT"},
            NINE : {value:9, name: "nine", code: "NINE"},
            TEN : {value:10, name: "ten", code: "TEN"},
            JACK : {value:11, name: "jack", code: "JACK"},
            QUEEN : {value:12, name: "queen", code: "QUEEN"},
            KING : {value:13, name: "king", code: "KING"},
            
        }

    </script>     
               
    </body>
    
    
   
   
</html>

